DROP VIEW "galaxy"."analysis_inputs_with_storage_path";--> statement-breakpoint
DROP VIEW "galaxy"."analysis_outputs_with_storage_path";--> statement-breakpoint
DROP VIEW "galaxy"."datasets_with_storage_path";--> statement-breakpoint
ALTER TABLE "galaxy"."datasets" ADD COLUMN "misc_blurb" varchar(512);--> statement-breakpoint
CREATE VIEW "galaxy"."analysis_inputs_with_storage_path" AS (select "galaxy"."datasets"."id", "galaxy"."analysis_inputs"."state", "galaxy"."analysis_inputs"."dataset_id", "galaxy"."analysis_inputs"."analysis_id", "galaxy"."datasets"."owner_id", "galaxy"."datasets"."history_id", "galaxy"."datasets"."storage_object_id", "galaxy"."datasets"."created_at", "galaxy"."datasets"."uuid", "galaxy"."datasets"."extension", "galaxy"."datasets"."data_lines", "galaxy"."datasets"."misc_blurb", "galaxy"."datasets"."dataset_name", "galaxy"."datasets"."galaxy_id", "galaxy"."datasets"."annotation", "storage"."objects"."name", "storage"."objects"."metadata" from "galaxy"."analysis_inputs" inner join "galaxy"."datasets" on "galaxy"."analysis_inputs"."dataset_id" = "galaxy"."datasets"."id" inner join "storage"."objects" on "galaxy"."datasets"."storage_object_id" = "storage"."objects"."id");--> statement-breakpoint
CREATE VIEW "galaxy"."analysis_outputs_with_storage_path" AS (select "galaxy"."datasets"."id", "galaxy"."analysis_outputs"."state", "galaxy"."analysis_outputs"."dataset_id", "galaxy"."analysis_outputs"."analysis_id", "galaxy"."analysis_outputs"."job_id", "galaxy"."datasets"."owner_id", "galaxy"."datasets"."history_id", "galaxy"."datasets"."storage_object_id", "galaxy"."datasets"."created_at", "galaxy"."datasets"."uuid", "galaxy"."datasets"."extension", "galaxy"."datasets"."data_lines", "galaxy"."datasets"."misc_blurb", "galaxy"."datasets"."dataset_name", "galaxy"."datasets"."galaxy_id", "galaxy"."datasets"."annotation", "storage"."objects"."name", "storage"."objects"."metadata" from "galaxy"."analysis_outputs" inner join "galaxy"."datasets" on "galaxy"."analysis_outputs"."dataset_id" = "galaxy"."datasets"."id" inner join "storage"."objects" on "galaxy"."datasets"."storage_object_id" = "storage"."objects"."id");--> statement-breakpoint
CREATE VIEW "galaxy"."datasets_with_storage_path" AS (select "galaxy"."datasets"."owner_id", "galaxy"."datasets"."history_id", "galaxy"."datasets"."storage_object_id", "storage"."objects"."created_at", "galaxy"."datasets"."uuid", "galaxy"."datasets"."extension", "galaxy"."datasets"."data_lines", "galaxy"."datasets"."misc_blurb", "galaxy"."datasets"."dataset_name", "galaxy"."datasets"."galaxy_id", "galaxy"."datasets"."annotation", "storage"."objects"."id", "storage"."objects"."name", "storage"."objects"."metadata" from "galaxy"."datasets" inner join "storage"."objects" on "galaxy"."datasets"."storage_object_id" = "storage"."objects"."id");