{
  "version": "8",
  "dialect": "postgres",
  "id": "ed1d1f61-4501-45d9-b110-135c80622172",
  "prevIds": [
    "00000000-0000-0000-0000-000000000000"
  ],
  "ddl": [
    {
      "name": "galaxy_rbac",
      "entityType": "schemas"
    },
    {
      "values": [
        "workflows.insert",
        "workflows.update",
        "workflows.select",
        "workflows.delete",
        "instances.insert",
        "instances.delete",
        "instances.update",
        "instances.select",
        "users.select",
        "users.insert",
        "users.update",
        "users.delete",
        "roles.select",
        "roles.insert",
        "roles.update",
        "roles.delete",
        "role_permissions.select",
        "role_permissions.insert",
        "role_permissions.update",
        "role_permissions.delete",
        "tags.select",
        "tags.insert",
        "tags.update",
        "tags.delete",
        "user_roles.select",
        "user_roles.insert",
        "user_roles.update",
        "user_roles.delete"
      ],
      "name": "role_permissions_type",
      "entityType": "enums",
      "schema": "galaxy_rbac"
    },
    {
      "values": [
        "admin",
        "user"
      ],
      "name": "role_type",
      "entityType": "enums",
      "schema": "galaxy_rbac"
    },
    {
      "isRlsEnabled": false,
      "name": "role_permissions",
      "entityType": "tables",
      "schema": "galaxy_rbac"
    },
    {
      "isRlsEnabled": true,
      "name": "roles",
      "entityType": "tables",
      "schema": "galaxy_rbac"
    },
    {
      "isRlsEnabled": true,
      "name": "user_roles",
      "entityType": "tables",
      "schema": "galaxy_rbac"
    },
    {
      "type": "serial",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "type": "role_permissions_type",
      "typeSchema": "galaxy_rbac",
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "permission",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "type": "integer",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "role_id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "type": "serial",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "roles"
    },
    {
      "type": "role_type",
      "typeSchema": "galaxy_rbac",
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "name",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "roles"
    },
    {
      "type": "serial",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "type": "integer",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "role_id",
      "entityType": "columns",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "nameExplicit": false,
      "columns": [
        {
          "value": "role_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "role_permissions_role_id_index",
      "entityType": "indexes",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "nameExplicit": false,
      "columns": [
        {
          "value": "permission",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "role_permissions_permission_index",
      "entityType": "indexes",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "nameExplicit": false,
      "columns": [
        "role_id"
      ],
      "schemaTo": "galaxy_rbac",
      "tableTo": "roles",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "NO ACTION",
      "name": "role_permissions_role_id_roles_id_fkey",
      "entityType": "fks",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "nameExplicit": false,
      "columns": [
        "user_id"
      ],
      "schemaTo": "auth",
      "tableTo": "users",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "user_roles_user_id_users_id_fkey",
      "entityType": "fks",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "nameExplicit": false,
      "columns": [
        "role_id"
      ],
      "schemaTo": "galaxy_rbac",
      "tableTo": "roles",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "user_roles_role_id_roles_id_fkey",
      "entityType": "fks",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "role_permissions_pkey",
      "schema": "galaxy_rbac",
      "table": "role_permissions",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "roles_pkey",
      "schema": "galaxy_rbac",
      "table": "roles",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "user_roles_pkey",
      "schema": "galaxy_rbac",
      "table": "user_roles",
      "entityType": "pks"
    },
    {
      "nameExplicit": false,
      "columns": [
        "permission",
        "role_id"
      ],
      "nullsNotDistinct": false,
      "name": "role_permissions_permission_role_id_unique",
      "entityType": "uniques",
      "schema": "galaxy_rbac",
      "table": "role_permissions"
    },
    {
      "nameExplicit": false,
      "columns": [
        "user_id",
        "role_id"
      ],
      "nullsNotDistinct": false,
      "name": "user_roles_user_id_role_id_unique",
      "entityType": "uniques",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    },
    {
      "as": "PERMISSIVE",
      "for": "SELECT",
      "roles": [
        "supabase_auth_admin"
      ],
      "using": "true",
      "withCheck": null,
      "name": "Allow auth admin to read roles",
      "entityType": "policies",
      "schema": "galaxy_rbac",
      "table": "roles"
    },
    {
      "as": "PERMISSIVE",
      "for": "SELECT",
      "roles": [
        "supabase_auth_admin"
      ],
      "using": "true",
      "withCheck": null,
      "name": "Allow auth admin to read user roles",
      "entityType": "policies",
      "schema": "galaxy_rbac",
      "table": "user_roles"
    }
  ],
  "renames": []
}
